{"ast":null,"code":"import _objectSpread from\"/Users/mucenid/questionnaire_poc/frontend/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import Question from'./Question';// Renderizza una pagina con le sue domande e raccoglie risposte\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function PageView(_ref){let{page,initialAnswers,onSubmit,loadingNext}=_ref;const[answers,setAnswers]=useState({});useEffect(()=>{setAnswers(initialAnswers||{});},[page===null||page===void 0?void 0:page.id]);if(!page)return/*#__PURE__*/_jsx(\"div\",{children:\"Nessuna pagina\"});const handleQuestionAnswer=(questionId,value)=>{setAnswers(prev=>_objectSpread(_objectSpread({},prev),{},{[questionId]:value}));};const requiredQuestions=(page.questions||[]).filter(q=>q.required);const isComplete=requiredQuestions.every(q=>answers[q.id]!==undefined&&answers[q.id]!==null&&answers[q.id]!=='');return/*#__PURE__*/_jsxs(\"div\",{className:\"page-view\",children:[/*#__PURE__*/_jsx(\"h2\",{children:page.title}),page.description&&/*#__PURE__*/_jsx(\"p\",{className:\"page-desc\",children:page.description}),(page.questions||[]).map(q=>/*#__PURE__*/_jsx(Question,{question:q,onAnswer:val=>handleQuestionAnswer(q.id,val)},q.id)),/*#__PURE__*/_jsx(\"div\",{className:\"nav-row\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\".concat(loadingNext?' is-loading':''),disabled:!isComplete||loadingNext,onClick:()=>onSubmit(answers),children:loadingNext?'Salvataggio…':page.isLast||page.nextPage===null?'Completa':\"Continua (\".concat(requiredQuestions.length,\")\")})})]});}","map":{"version":3,"names":["React","useState","useEffect","Question","jsx","_jsx","jsxs","_jsxs","PageView","_ref","page","initialAnswers","onSubmit","loadingNext","answers","setAnswers","id","children","handleQuestionAnswer","questionId","value","prev","_objectSpread","requiredQuestions","questions","filter","q","required","isComplete","every","undefined","className","title","description","map","question","onAnswer","val","concat","disabled","onClick","isLast","nextPage","length"],"sources":["/Users/mucenid/questionnaire_poc/frontend/frontend/src/components/PageView.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Question from './Question';\n\n// Renderizza una pagina con le sue domande e raccoglie risposte\nexport default function PageView({ page, initialAnswers, onSubmit, loadingNext }) {\n  const [answers, setAnswers] = useState({});\n\n  useEffect(() => {\n    setAnswers(initialAnswers || {});\n  }, [page?.id]);\n\n  if (!page) return <div>Nessuna pagina</div>;\n\n  const handleQuestionAnswer = (questionId, value) => {\n    setAnswers(prev => ({ ...prev, [questionId]: value }));\n  };\n\n  const requiredQuestions = (page.questions || []).filter(q => q.required);\n  const isComplete = requiredQuestions.every(q => answers[q.id] !== undefined && answers[q.id] !== null && answers[q.id] !== '');\n\n  return (\n    <div className=\"page-view\">\n      <h2>{page.title}</h2>\n      {page.description && <p className=\"page-desc\">{page.description}</p>}\n      {(page.questions || []).map(q => (\n        <Question key={q.id} question={q} onAnswer={(val) => handleQuestionAnswer(q.id, val)} />\n      ))}\n      <div className=\"nav-row\">\n        <button\n          className={`btn btn-primary${loadingNext ? ' is-loading' : ''}`}\n          disabled={!isComplete || loadingNext}\n          onClick={() => onSubmit(answers)}\n        >\n          {loadingNext\n            ? 'Salvataggio…'\n            : (page.isLast || page.nextPage === null\n              ? 'Completa'\n              : `Continua (${requiredQuestions.length})`)}\n        </button>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"uIAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAClD,MAAO,CAAAC,QAAQ,KAAM,YAAY,CAEjC;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBACA,cAAe,SAAS,CAAAC,QAAQA,CAAAC,IAAA,CAAkD,IAAjD,CAAEC,IAAI,CAAEC,cAAc,CAAEC,QAAQ,CAAEC,WAAY,CAAC,CAAAJ,IAAA,CAC9E,KAAM,CAACK,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,CAAC,CAAC,CAAC,CAE1CC,SAAS,CAAC,IAAM,CACda,UAAU,CAACJ,cAAc,EAAI,CAAC,CAAC,CAAC,CAClC,CAAC,CAAE,CAACD,IAAI,SAAJA,IAAI,iBAAJA,IAAI,CAAEM,EAAE,CAAC,CAAC,CAEd,GAAI,CAACN,IAAI,CAAE,mBAAOL,IAAA,QAAAY,QAAA,CAAK,gBAAc,CAAK,CAAC,CAE3C,KAAM,CAAAC,oBAAoB,CAAGA,CAACC,UAAU,CAAEC,KAAK,GAAK,CAClDL,UAAU,CAACM,IAAI,EAAAC,aAAA,CAAAA,aAAA,IAAUD,IAAI,MAAE,CAACF,UAAU,EAAGC,KAAK,EAAG,CAAC,CACxD,CAAC,CAED,KAAM,CAAAG,iBAAiB,CAAG,CAACb,IAAI,CAACc,SAAS,EAAI,EAAE,EAAEC,MAAM,CAACC,CAAC,EAAIA,CAAC,CAACC,QAAQ,CAAC,CACxE,KAAM,CAAAC,UAAU,CAAGL,iBAAiB,CAACM,KAAK,CAACH,CAAC,EAAIZ,OAAO,CAACY,CAAC,CAACV,EAAE,CAAC,GAAKc,SAAS,EAAIhB,OAAO,CAACY,CAAC,CAACV,EAAE,CAAC,GAAK,IAAI,EAAIF,OAAO,CAACY,CAAC,CAACV,EAAE,CAAC,GAAK,EAAE,CAAC,CAE9H,mBACET,KAAA,QAAKwB,SAAS,CAAC,WAAW,CAAAd,QAAA,eACxBZ,IAAA,OAAAY,QAAA,CAAKP,IAAI,CAACsB,KAAK,CAAK,CAAC,CACpBtB,IAAI,CAACuB,WAAW,eAAI5B,IAAA,MAAG0B,SAAS,CAAC,WAAW,CAAAd,QAAA,CAAEP,IAAI,CAACuB,WAAW,CAAI,CAAC,CACnE,CAACvB,IAAI,CAACc,SAAS,EAAI,EAAE,EAAEU,GAAG,CAACR,CAAC,eAC3BrB,IAAA,CAACF,QAAQ,EAAYgC,QAAQ,CAAET,CAAE,CAACU,QAAQ,CAAGC,GAAG,EAAKnB,oBAAoB,CAACQ,CAAC,CAACV,EAAE,CAAEqB,GAAG,CAAE,EAAtEX,CAAC,CAACV,EAAsE,CACxF,CAAC,cACFX,IAAA,QAAK0B,SAAS,CAAC,SAAS,CAAAd,QAAA,cACtBZ,IAAA,WACE0B,SAAS,mBAAAO,MAAA,CAAoBzB,WAAW,CAAG,aAAa,CAAG,EAAE,CAAG,CAChE0B,QAAQ,CAAE,CAACX,UAAU,EAAIf,WAAY,CACrC2B,OAAO,CAAEA,CAAA,GAAM5B,QAAQ,CAACE,OAAO,CAAE,CAAAG,QAAA,CAEhCJ,WAAW,CACR,cAAc,CACbH,IAAI,CAAC+B,MAAM,EAAI/B,IAAI,CAACgC,QAAQ,GAAK,IAAI,CACpC,UAAU,cAAAJ,MAAA,CACGf,iBAAiB,CAACoB,MAAM,KAAI,CACzC,CAAC,CACN,CAAC,EACH,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}